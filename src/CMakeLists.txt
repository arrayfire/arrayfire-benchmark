CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
project(af_benchmark)

FILE(GLOB SOURCE "*.cpp")

MACRO(CREATE_BENCHMARK BACKEND)
    ADD_EXECUTABLE(benchmark_${BACKEND} ${SOURCE})
    TARGET_LINK_LIBRARIES(benchmark_${BACKEND} celero af${BACKEND} ${THREAD_LIB_FLAG})
    SET_TARGET_PROPERTIES(benchmark_${BACKEND} PROPERTIES COMPILE_FLAGS -DAF_${DEF_NAME})
ENDMACRO(CREATE_BENCHMARK)


IF(${BUILD_CPU})
  CREATE_BENCHMARK(cpu)
ENDIF()

IF(${BUILD_CUDA})
  CREATE_BENCHMARK(cuda)
ENDIF()

IF(${BUILD_OPENCL})
  CREATE_BENCHMARK(opencl)
ENDIF()

INCLUDE_DIRECTORIES(
    ${CMAKE_CURRENT_SOURCE_DIR}
)
